function CCapture(a){function j(){f&&console.log("Incrementing time");d+=h;k++;for(var b=0;b<c.length;b++)d>=c[b].triggerTime&&(c[b].callback(),console.log("timeout!"),c.splice(b,1));e&&e()}var a=a||{},l=new Date,f,d,h,c=[],k=0,e=null,g=!1;a.framerate=a.framerate||60;a.quality=a.quality||0.8;f=a.verbose||!1;h=1E3/a.framerate;var i=new Whammy.Video(a.framerate,a.quality),m=requestAnimationFrame;(function(){f&&console.log("Capturer start");d=l.getTime();Date.prototype.getTime=function(){return d};Date.now=
function(){return d};setTimeout=function(b,a){var e={callback:b,time:a,triggerTime:d+a};c.push(e);f&&console.log("Timeout set to "+e.time);return e};clearTimeout=function(b){for(var a=0;a<c.length;a++)c[a]==b&&(c.splice(a,1),f&&console.log("Timeout cleared"))};requestAnimationFrame=function(a){e=a}})();return{start:function(){g=!0},capture:function(a){g&&i.add(a);m(j)},stop:function(){g=!1},save:function(){var a=i.compile(),a=new Blob([a],{type:"octet/stream"});return window.URL.createObjectURL(a)}}}
;
